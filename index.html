<!DOCTYPE html>
<html lang="sq">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Gjuha Shqipe - Klasa 3</title>
  <link rel="manifest" href="manifest.json">
  <style>
    body { 
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; 
      background-color: #f0f9ff; 
      margin: 0; padding: 20px; 
      display: flex; justify-content: center; align-items: flex-start; min-height: 100vh;
      touch-action: manipulation;
      color: #333;
    }
    #app { 
      background: white; padding: 30px; border-radius: 24px; 
      box-shadow: 0 12px 35px rgba(0,0,0,0.08); 
      width: 100%; max-width: 700px; text-align: center;
      margin-top: 20px;
    }
    h1 { color: #0277bd; font-size: 32px; margin-bottom: 10px; }
    h2 { color: #01579b; font-size: 26px; }
    p { font-size: 18px; color: #555; line-height: 1.5; }
    
    /* Buttons */
    button { 
      padding: 20px; font-size: 22px; border: 3px solid #0288d1; 
      background-color: #fff; color: #0288d1; border-radius: 16px; 
      cursor: pointer; transition: all 0.2s ease;
      -webkit-tap-highlight-color: transparent;
      width: 100%; margin-bottom: 15px; font-weight: bold;
    }
    button:active { transform: scale(0.97); }
    .btn-primary { background-color: #0288d1; color: white; }
    .btn-secondary { background-color: #ff9800; border-color: #ff9800; color: white; }
    .btn-back { background-color: #e0e0e0; border-color: #e0e0e0; color: #333; margin-top: 20px; }
    
    /* Quiz Options */
    .correct { background-color: #4caf50 !important; color: white !important; border-color: #4caf50 !important; }
    .wrong { background-color: #f44336 !important; color: white !important; border-color: #f44336 !important; }
    
    /* Lessons */
    .lesson-card {
      background-color: #e1f5fe; border-left: 6px solid #0288d1;
      padding: 20px; margin-bottom: 20px; border-radius: 12px;
      text-align: left;
    }
    .lesson-card h3 { margin-top: 0; color: #01579b; font-size: 22px; }
    .lesson-card p { font-size: 20px; margin-bottom: 0; }

    #progress { color: #757575; font-size: 18px; margin-bottom: 15px; font-weight: bold; }
    .question { font-size: 26px; margin-bottom: 30px; color: #222; font-weight: bold; }
    
    /* Screen Management */
    .screen { display: none; }
    .screen.active { display: block; }
  </style>
</head>
<body>

<div id="app">
  
  <div id="screen-home" class="screen active">
    <h1>PÃ«rshÃ«ndetje, Noar! ğŸ‘‹</h1>
    <p>MirÃ« se erdhe! KÃ«tu mund tÃ« mÃ«sosh dhe tÃ« ushtrosh gramatikÃ«n e GjuhÃ«s Shqipe pÃ«r klasÃ«n e 3-tÃ«.</p>
    <br>
    <button class="btn-primary" onclick="showScreen('screen-lessons')">ğŸ“– Lexo MÃ«simet</button>
    <button class="btn-secondary" onclick="showScreen('screen-tests')">âœï¸ Fillo Testet</button>
  </div>

  <div id="screen-lessons" class="screen">
    <h2>MÃ«simet e GramatikÃ«s</h2>
    <div id="lessons-container">
      <div class="lesson-card">
        <h3>1. Emri</h3>
        <p>Fjala qÃ« tregon njerÃ«z, kafshÃ«, sende, vende ose ndjenja quhet <b>EMÃ‹R</b>.<br><i>Shembuj:</i> djali, macja, lapsi, qyteti, gÃ«zimi.</p>
      </div>
      <div class="lesson-card">
        <h3>2. Mbiemri</h3>
        <p>Fjala qÃ« tregon njÃ« cilÃ«si (si Ã«shtÃ«) tÃ« emrit quhet <b>MBIEMÃ‹R</b>.<br><i>Shembuj:</i> djalÃ« <b>i mirÃ«</b>, mollÃ« <b>e kuqe</b>, qiell <b>i kaltÃ«r</b>.</p>
      </div>
      <div class="lesson-card">
        <h3>3. Gjinia e Emrit</h3>
        <p>Emrat kanÃ« dy gjini kryesore:<br><b>Mashkullore:</b> mbarojnÃ« me <b>-i</b> ose <b>-u</b> (lapsi, djaloshi, zogu).<br><b>FemÃ«rore:</b> mbarojnÃ« me <b>-a</b> ose <b>-ja</b> (vajza, lulja, fletorja).</p>
      </div>
      <div class="lesson-card">
        <h3>4. Numri i Emrit</h3>
        <p><b>NjÃ«jÃ«s:</b> tregon vetÃ«m njÃ« (njÃ« laps, njÃ« lule).<br><b>ShumÃ«s:</b> tregon dy ose mÃ« shumÃ« (disa lapsa, disa lule).</p>
      </div>
    </div>
    <button class="btn-back" onclick="showScreen('screen-home')">â¬… Kthehu nÃ« BallinÃ«</button>
  </div>

  <div id="screen-tests" class="screen">
    <h2>Zgjidh njÃ« Test</h2>
    <div id="test-buttons-container"></div>
    <button class="btn-back" onclick="showScreen('screen-home')">â¬… Kthehu nÃ« BallinÃ«</button>
  </div>

  <div id="screen-quiz" class="screen">
    <h2 id="quiz-title">Testi</h2>
    <div id="progress">Pyetja 1 / 5</div>
    <div class="question" id="question">Loading...</div>
    <div id="options"></div>
    <button class="btn-secondary" id="next-btn" onclick="nextQuestion()" style="display:none; margin-top:25px;">Vazhdo te pyetja tjetÃ«r â¡</button>
    <button class="btn-back" onclick="showScreen('screen-tests')">â¬… NdÃ«rprit Testin</button>
  </div>

  <div id="screen-score" class="screen">
    <h2>Testi PÃ«rfundoi!</h2>
    <h1 id="score-text" style="font-size: 48px; margin: 20px 0;"></h1>
    <p id="score-message" style="font-size: 24px; font-weight: bold;"></p>
    <br>
    <button class="btn-primary" onclick="showScreen('screen-tests')">Zgjidh njÃ« Test TjetÃ«r</button>
    <button class="btn-back" onclick="showScreen('screen-home')">Kthehu nÃ« BallinÃ«</button>
  </div>

</div>

<script>
  // Test Data
  const testsData = [
    {
      name: "Testi 1: Ã‡farÃ« Ã«shtÃ« Emri?",
      questions: [
        { q: "Cila fjalÃ« tregon NJERI?", options: ["Lapsi", "MÃ«suesja", "Tavolina"], a: "MÃ«suesja" },
        { q: "Cila fjalÃ« tregon KAFSHÃ‹?", options: ["ShtÃ«pia", "Macja", "GÃ«zimi"], a: "Macja" },
        { q: "Si shkruhet emri i njÃ« qyteti (EmÃ«r i PÃ«rveÃ§Ã«m)?", options: ["prishtina", "Prishtina", "PRISHTiNa"], a: "Prishtina" },
        { q: "Cili grup ka vetÃ«m EMRA?", options: ["lapsi, djali, mali", "kÃ«ndoj, luaj, qesh", "i mirÃ«, e bukur"], a: "lapsi, djali, mali" },
        { q: "Fjala qÃ« tregon njÃ« SEND Ã«shtÃ«:", options: ["KÃ«ndoj", "Libri", "I shpejtÃ«"], a: "Libri" }
      ]
    },
    {
      name: "Testi 2: Gjej Mbiemrin",
      questions: [
        { q: "Cila fjalÃ« tregon njÃ« CILÃ‹SI (MbiemÃ«r)?", options: ["Libri", "Lexoj", "I menÃ§ur"], a: "I menÃ§ur" },
        { q: "Gjej mbiemrin nÃ« fjalinÃ«: 'Qielli Ã«shtÃ« i kaltÃ«r.'", options: ["Qielli", "Ã«shtÃ«", "i kaltÃ«r"], a: "i kaltÃ«r" },
        { q: "Zgjidh mbiemrin e duhur: 'MollÃ« ______'", options: ["e kuqe", "i kuq", "tÃ« kuqe"], a: "e kuqe" },
        { q: "Zgjidh mbiemrin e duhur: 'DjalÃ« ______'", options: ["e zgjuar", "i zgjuar", "tÃ« zgjuar"], a: "i zgjuar" },
        { q: "Cila nga kÃ«to fjalÃ« NUK Ã«shtÃ« mbiemÃ«r?", options: ["I ngadalshÃ«m", "I lartÃ«", "Vrapoj"], a: "Vrapoj" }
      ]
    },
    {
      name: "Testi 3: Gjinia Mashkullore dhe FemÃ«rore",
      questions: [
        { q: "Emri 'Lapsi' Ã«shtÃ« nÃ« gjininÃ«:", options: ["Mashkullore", "FemÃ«rore"], a: "Mashkullore" },
        { q: "Emri 'Vajza' Ã«shtÃ« nÃ« gjininÃ«:", options: ["Mashkullore", "FemÃ«rore"], a: "FemÃ«rore" },
        { q: "Cili nga kÃ«ta emra Ã«shtÃ« nÃ« gjininÃ« FEMÃ‹RORE?", options: ["Miku", "Lulja", "Zogu"], a: "Lulja" },
        { q: "Cili nga kÃ«ta emra Ã«shtÃ« nÃ« gjininÃ« MASHKULLORE?", options: ["Fletorja", "Mami", "Gjyshi"], a: "Gjyshi" },
        { q: "Si bÃ«n nÃ« gjininÃ« femÃ«rore emri 'MÃ«suesi'?", options: ["MÃ«suesit", "MÃ«suesja", "MÃ«sueseve"], a: "MÃ«suesja" }
      ]
    },
    {
      name: "Testi 4: Numri NjÃ«jÃ«s dhe ShumÃ«s",
      questions: [
        { q: "Emri 'Librat' Ã«shtÃ« nÃ« numrin:", options: ["NjÃ«jÃ«s", "ShumÃ«s"], a: "ShumÃ«s" },
        { q: "Cili emÃ«r tregon VETÃ‹M NJÃ‹ (NjÃ«jÃ«s)?", options: ["Lapsat", "DjemtÃ«", "Lulja"], a: "Lulja" },
        { q: "Si bÃ«n nÃ« shumÃ«s emri 'Vajza'?", options: ["Vajzat", "VajzÃ«s", "VajzÃ«"], a: "Vajzat" },
        { q: "Cili grup ka fjalÃ« vetÃ«m nÃ« numrin SHUMÃ‹S?", options: ["Libri, lapsi", "Librat, lapsat", "Libri, lapsat"], a: "Librat, lapsat" },
        { q: "Numri NjÃ«jÃ«s i fjalÃ«s 'ZogjtÃ«' Ã«shtÃ«:", options: ["Zog", "Zogu", "Zogut"], a: "Zogu" }
      ]
    },
    {
      name: "Testi 5: Antonimet dhe Sinonimet",
      questions: [
        { q: "Cili Ã«shtÃ« ANTONIMI (e kundÃ«rta) e fjalÃ«s 'I ngadalshÃ«m'?", options: ["I keq", "I shpejtÃ«", "I vogÃ«l"], a: "I shpejtÃ«" },
        { q: "Antonimi i fjalÃ«s 'NatÃ«' Ã«shtÃ«:", options: ["ErrÃ«sirÃ«", "HÃ«nÃ«", "DitÃ«"], a: "DitÃ«" },
        { q: "Cili Ã«shtÃ« SINONIMI (kuptim i njÃ«jtÃ«) pÃ«r fjalÃ«n 'Shikoj'?", options: ["Flas", "Eci", "VÃ«shtroj"], a: "VÃ«shtroj" },
        { q: "Antonimi i fjalÃ«s 'I ftohtÃ«' Ã«shtÃ«:", options: ["I akullt", "I ngrohtÃ«", "I bardhÃ«"], a: "I ngrohtÃ«" },
        { q: "Sinonimi pÃ«r fjalÃ«n 'Ã‡un' Ã«shtÃ«:", options: ["BurrÃ«", "DjalÃ«", "VajzÃ«"], a: "DjalÃ«" }
      ]
    },
    {
      name: "Testi 6: Sfida e Mjeshtrit (PÃ«rzier)",
      questions: [
        { q: "Cili Ã«shtÃ« emÃ«r i PÃ‹RVEÃ‡Ã‹M?", options: ["qyteti", "Kosova", "vendi"], a: "Kosova" },
        { q: "NÃ« fjalinÃ« 'Vajza e zgjuar lexon.', cila fjalÃ« Ã«shtÃ« MBIEMRI?", options: ["Vajza", "lexon", "e zgjuar"], a: "e zgjuar" },
        { q: "Emri 'Fluturat' Ã«shtÃ« nÃ« gjininÃ« dhe numrin:", options: ["FemÃ«rore, ShumÃ«s", "Mashkullore, NjÃ«jÃ«s", "FemÃ«rore, NjÃ«jÃ«s"], a: "FemÃ«rore, ShumÃ«s" },
        { q: "Cili nga kÃ«ta Ã«shtÃ« MBIEMÃ‹R i panyjshÃ«m?", options: ["trim", "i mirÃ«", "e zgjuar"], a: "trim" },
        { q: "Si shkruhet saktÃ« fjalia e mÃ«poshtme?", options: ["noari lexon librin.", "Noari lexon librin.", "Noari Lexon Librin."], a: "Noari lexon librin." }
      ]
    }
  ];

  // App State
  let activeTestIndex = 0;
  let currentQuestionIndex = 0;
  let score = 0;

  // Initialize Tests Menu
  const testMenuContainer = document.getElementById('test-buttons-container');
  testsData.forEach((test, index) => {
    const btn = document.createElement('button');
    btn.innerText = test.name;
    btn.onclick = () => startTest(index);
    testMenuContainer.appendChild(btn);
  });

  // Screen Navigation
  function showScreen(screenId) {
    document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
    document.getElementById(screenId).classList.add('active');
  }

  function startTest(index) {
    activeTestIndex = index;
    currentQuestionIndex = 0;
    score = 0;
    document.getElementById('quiz-title').innerText = testsData[index].name;
    showScreen('screen-quiz');
    loadQuestion();
  }

  function loadQuestion() {
    const nextBtn = document.getElementById('next-btn');
    nextBtn.style.display = 'none';
    
    const test = testsData[activeTestIndex];
    const currentQ = test.questions[currentQuestionIndex];
    
    document.getElementById('progress').innerText = `Pyetja ${currentQuestionIndex + 1} nga ${test.questions.length}`;
    document.getElementById('question').innerText = currentQ.q;
    
    const optionsEl = document.getElementById('options');
    optionsEl.innerHTML = '';
    
    currentQ.options.forEach(option => {
      const btn = document.createElement('button');
      btn.innerText = option;
      btn.onclick = () => selectAnswer(btn, option, currentQ.a);
      optionsEl.appendChild(btn);
    });
  }

  function selectAnswer(selectedBtn, selectedText, correctText) {
    // Disable all buttons to prevent multiple taps
    const allBtns = document.getElementById('options').querySelectorAll('button');
    allBtns.forEach(btn => btn.disabled = true);

    if (selectedText === correctText) {
      selectedBtn.classList.add('correct');
      score++;
    } else {
      selectedBtn.classList.add('wrong');
      // Show correct answer automatically
      allBtns.forEach(btn => {
        if (btn.innerText === correctText) btn.classList.add('correct');
      });
    }
    document.getElementById('next-btn').style.display = 'block';
  }

  function nextQuestion() {
    const test = testsData[activeTestIndex];
    currentQuestionIndex++;
    
    if (currentQuestionIndex < test.questions.length) {
      loadQuestion();
    } else {
      showFinalScore();
    }
  }

  function showFinalScore() {
    const test = testsData[activeTestIndex];
    document.getElementById('score-text').innerText = `${score} / ${test.questions.length}`;
    
    const msgEl = document.getElementById('score-message');
    if(score === test.questions.length) {
      msgEl.innerText = "TÃ« lumtÃ« Noar! Je i shkÃ«lqyer! ğŸŒŸğŸ†";
      msgEl.style.color = "#4caf50";
    } else if(score >= test.questions.length - 2) {
      msgEl.innerText = "ShumÃ« mirÃ«! Rezultat mjaft i mirÃ«! ğŸ‘";
      msgEl.style.color = "#ff9800";
    } else {
      msgEl.innerText = "Mos u dorÃ«zo! Lexo mÃ«simet dhe provoje pÃ«rsÃ«ri! ğŸ’ª";
      msgEl.style.color = "#f44336";
    }
    
    showScreen('screen-score');
  }
</script>
</body>
</html>